# Refer to the wiki for more information.
# https://wiki.hyprland.org/Configuring/

################
### MONITORS ###
################
#Main display
monitor=eDP-1,2560x1600@120,0x0,1.0,bitdepth,10 

#Right position
#monitor=HDMI-A-1,1920x1080@60,2560x-800,0.83333
#Top position
monitor=HDMI-A-1,1920x1080@60,140x-1298, 0.83333

###################
### MY PROGRAMS ###
###################

# Set programs that you use 
$terminal = kitty
$fileManager = nemo
$screenshot = hyprshot -m region -o /home/sava/Pictures/scr/

#################
### AUTOSTART ###
#################

exec-once = waybar 
exec-once = swaync
exec-once = nm-applet
exec-once = blueman-applet
exec-once = hyprpaper
exec-once = copyq
#exec-once = easyeffects --gapplication-service
exec-once = /usr/bin/hyprland-per-window-layout
exec-once = dbus-update-activation-environment --systemd HYPRLAND_INSTANCE_SIGNATURE WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
#exec = hyprshade auto
#exec-once = kdeconnectd&
#exec-once = sleep 2s && kdeconnect-indicator&
exec-once = /usr/lib/polkit-kde-authentication-agent-1
exec-once = xrdb -merge ~/.Xresources
exec-once = /home/sava/extra/wallswitcher.sh
exec-once = /home/sava/extra/switchDisplayPosistion.sh
exec-once = hyprctl setcursor Nordzy-hyprcursors-white 40
exec-once = /usr/bin/hyprland-per-window-layout

#############################
### ENVIRONMENT VARIABLES ###
#############################

env = GDK_SCALE, 1.00
#env = GDK_DPI_SCALE, 0.83
env = GDK_DPI_SCALE, 1.0
env = GDK_BACKEND,wayland,x11,*
env = CLUTTER_BACKEND,wayland

env = XDG_CURRENT_DESKTOP,Hyprland
env = XDG_SESSION_TYPE,wayland
env = XDG_SESSION_DESKTOP,Hyprland
env = XCURSOR_SIZE,40

env = QT_QPA_PLATFORM=wayland;xcb
env = QT_QPA_PLATFORMTHEME, qt6ct
env = QT_ENABLE_HIGHDPI_SCALING, 1
env = QT_FONT_DPI=189

env = OZONE_PLATFORM, wayland
env = ELECTRON_OZONE_PLATFORM_HINT,wayland

xwayland {
    #use_nearest_neighbor = true
    enabled = true
    force_zero_scaling = true
}

experimental {
    wide_color_gamut = true
    hdr = false
}

#####################
### LOOK AND FEEL ###
#####################

general {
    #allow_tearing = true    
    gaps_in = 3
    gaps_out = 3    
    border_size = 0
    resize_on_border = true
    layout = dwindle
    gaps_workspaces = 20
}

dwindle {
    pseudotile = false
    preserve_split = true
}

master {
    #new_status = stack
    mfact = 0.65
}

cursor {
    no_warps = false
    sync_gsettings_theme = false
}

decoration {
    rounding = 14
    active_opacity = 1.0
    inactive_opacity = 1.0

    shadow {
        enabled = false
        range = 2
        render_power = 4
        color = rgba(1C2F35ee)
    }

    blur {
        enabled = false
        size = 6
        passes = 1
        vibrancy = 0.1696
    }
}

animations {
    enabled = true
    bezier = myBezier, 0.05, 0.9, 0.1, 1.05
    animation = windows, 1, 7, myBezier
    animation = windowsOut, 1, 7, default, popin 80%
    animation = border, 1, 10, default
    animation = borderangle, 1, 8, default
    animation = fade, 1, 7, default
    animation = workspaces, 1, 6, default    
}

misc {
    #enale display on mouse moving
    mouse_move_enables_dpms=true
    key_press_enables_dpms=true
    animate_manual_resizes=true
    enable_swallow=true
    force_default_wallpaper = 1
    disable_hyprland_logo = true
    disable_splash_rendering = true
    vfr = true
    vrr = 1
}

#############
### INPUT ###
#############

input {
    kb_layout = us,ru
    numlock_by_default = true
    kb_options = grp:caps_toggle
    follow_mouse = 1
    sensitivity = 1
    accel_profile = adaptive

    touchpad {
        natural_scroll = yes
        tap-to-click = yes
        disable_while_typing=true
        middle_button_emulation=true  
    }
}

###################
### KEYBINDINGS ###
###################

$mainMod = SUPER # Sets "Windows" key as main modifier

bind = $mainMod, Q, killactive
bind = $mainMod, F, togglefloating
bind = ALT_L, Tab, workspace, m+1
bind = $mainMod, Y, togglesplit

# Move focus with mainMod + arrow keys
bind = $mainMod, left, movefocus, l
bind = $mainMod, right, movefocus, r
bind = $mainMod, up, movefocus, u
bind = $mainMod, down, movefocus, d

workspace = 1, rounding:true

# Switch workspaces with mainMod + [0-9]
bind = $mainMod, 1, workspace, 1
bind = $mainMod, 2, workspace, 2
bind = $mainMod, 3, workspace, 3
bind = $mainMod, 4, workspace, 4
bind = $mainMod, 5, workspace, 5
bind = $mainMod, 6, workspace, 6
bind = $mainMod, 7, workspace, 7
bind = $mainMod, 8, workspace, 8
bind = $mainMod, 9, workspace, 9

# Move active window to a workspace with mainMod + SHIFT + [0-9]
# movetoworkspacesilent or movetoworkspace
bind = $mainMod SHIFT, 1, movetoworkspacesilent, 1
bind = $mainMod SHIFT, 2, movetoworkspacesilent, 2
bind = $mainMod SHIFT, 3, movetoworkspacesilent, 3
bind = $mainMod SHIFT, 4, movetoworkspacesilent, 4
bind = $mainMod SHIFT, 5, movetoworkspacesilent, 5
bind = $mainMod SHIFT, 6, movetoworkspacesilent, 6
bind = $mainMod SHIFT, 7, movetoworkspacesilent, 7
bind = $mainMod SHIFT, 8, movetoworkspacesilent, 8
bind = $mainMod SHIFT, 9, movetoworkspacesilent, 9

# Move window on workspace,bindm - with mouse using
bindm = SUPER, ALT_L, resizewindow
bind = $mainMod SHIFT, left, swapwindow, l
bind = $mainMod SHIFT, right, swapwindow, r
bind = $mainMod SHIFT, up, swapwindow, u
bind = $mainMod SHIFT, down, swapwindow, d

# Scroll through existing workspaces with mainMod + scroll
bind = $mainMod, mouse_down, workspace, e+1
bind = $mainMod, mouse_up, workspace, e-1

# Move/resize windows with mainMod + LMB/RMB and dragging
bindm = $mainMod, mouse:272, movewindow
bindm = $mainMod, mouse:273, resizewindow

# Laptop multimedia keys for volume and LCD brightness
bindel = ,XF86AudioRaiseVolume, exec, wpctl set-volume -l 1.5 @DEFAULT_AUDIO_SINK@ 5%+
bindel = ,XF86AudioLowerVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%-
bindel = ,XF86AudioMute, exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle
bindel = ,XF86MonBrightnessUp, exec, brightnessctl s 5%+
bindel = ,XF86MonBrightnessDown, exec, brightnessctl s 5%-
bindel = ,XF86Calculator, exec, gnome-calculator
bindel = ,XF86AudioMicMute, exec, pactl set-source-mute @DEFAULT_SOURCE@ toggle
bindel = ,XF86TouchpadToggle, exec, /home/sava/extra/touch-switcher.sh
#binde = ,XF86WebCam, exec, /home/sava/extra/togl-camera.sh

# bind applications here
bind = $mainMod, F1, exec, $terminal
bind = $mainMod, E, exec, $fileManager
bind = $mainMod, R, exec, pkill rofi || rofi -show drun
bind = $mainMod SHIFT, S, exec, $screenshot
bind = $mainMod, V, exec, copyq toggle
bind = $mainMod, L, exec, hyprlock
bind = $mainMod, O, exec, pkill -SIGUSR2 waybar
bind = SUPER SHIFT, W, pass, ^(com\.obsproject\.Studio)$
bind = SUPER SHIFT, E, pass, ^(com\.obsproject\.Studio)$
bind = $mainMod, T, exec, telegram-desktop
bind = $mainMod, A, fullscreen, 1
bind = SUPER, P, exec, /home/sava/extra/switchDisplayPosistion.sh

# Example special workspace (scratchpad)
bind = $mainMod, Z, togglespecialworkspace, z-space
bind = $mainMod, X, togglespecialworkspace, x-space
bind = $mainMod, C, togglespecialworkspace, c-space
bind = $mainMod, T, togglespecialworkspace, t-space

bind = $mainMod SHIFT, Z, movetoworkspacesilent, special:z-space
bind = $mainMod SHIFT, X, movetoworkspacesilent, special:x-space
bind = $mainMod SHIFT, C, movetoworkspacesilent, special:c-space
bind = $mainMod SHIFT, T, movetoworkspacesilent, special:t-space

gestures {
    workspace_swipe = true
}

##############################
### WINDOWS AND WORKSPACES ###
##############################

# Ignore maximize requests from apps. You'll probably like this.
windowrulev2 = suppressevent maximize, class:.*

# Fix some dragging issues with XWayland
windowrulev2 = nofocus,class:^$,title:^$,xwayland:1,floating:1,fullscreen:0,pinned:0

windowrule = float,^(org.telegram.desktop)$
windowrule = size 1200 1200,^(org.telegram.desktop)$

windowrule = float,^(com.github.hluk.copyq)$
windowrule = opacity 0.9,^(com.github.hluk.copyq)$
windowrule = size 340 600,^(com.github.hluk.copyq)$
windowrule = move 1600 50,^(com.github.hluk.copyq)$

windowrule = float,^(blueman-manager)$
windowrule = opacity 0.9, ^(blueman-manager)$
windowrule = size 200 400,^(blueman-manager)$
windowrule = move 1440 50,^(blueman-manager)$

windowrule = float,^(org.pulseaudio.pavucontrol)$
windowrule = opacity 0.9,^(org.pulseaudio.pavucontrol)$
windowrule = size 540 350,^(org.pulseaudio.pavucontrol)$
windowrule = move 1700 50,^(org.pulseaudio.pavucontrol)$

windowrule = float,^(org.gnome.Calculator)$
windowrule = opacity 0.9,^(org.gnome.Calculator)$

windowrule = opacity 0.85,^(kitty)$
windowrule = size 1800 800,^(kitty)$
windowrule = float,^(kitty)$